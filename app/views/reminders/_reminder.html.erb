<!-- _reminder.html.erb -->

<% Reminder::STATUS.each do |status| %>
  <% @reminders.select { |reminder| reminder.status == status }.drop(3).each do |reminder| %>
    <div class="card Card-<%= status.parameterize(separator: '-') %> mb-3">
      <h6 class="Card__title"><%= link_to reminder.title, reminder_path(reminder) %></h6>
      <div class="Card__body">
        <% if reminder.my_guide.present? && reminder.my_guide.article.present? %>
          <div class="Card__body-block">
            <div class="Card__body-header">
              <%= image_tag 'book-open.svg', class: 'Card__body-icon--book' %>
              <h5 class="Card__body-text--semi-bold">Article associé</h5>
            </div>
            <p class="regular-s"><%= reminder.my_guide.article.title %></p>
          </div>
        <% else %>
          <p class="regular-s">Article associé non trouvé</p>
        <% end %>

        <div class="Card__body-header">
          <%= image_tag 'Clock.svg', class: 'Card__body-icon--book' %>
          <% days_left = (reminder.end_time.to_date - Date.today).to_i %>
          <p class="Card__body-text--semi-bold"><small class="text-muted">Jours restants: <%= days_left %> jours</small></p>
        </div>

        <% if reminder.my_guide.present? %>
          <div class="Card__body-form">
            <%= image_tag 'external-link.svg', class: 'Card__body-icon--book' %>
            <h5 class="bold-m"><%= link_to 'Mon formulaire', summary_my_guide_path(reminder.my_guide) %></h5>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>
